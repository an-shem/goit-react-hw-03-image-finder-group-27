{"version":3,"sources":["services/galleryApi.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/WrappLoader/WrappLoader.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.jsx","index.js"],"names":["MY_KEY","BASE_URL","galleryApi","fetchGalleryWithQuery","searchQuery","numberPage","axios","get","then","response","data","hits","Searchbar","state","value","handleChange","target","name","setState","handeleSubmit","e","preventDefault","props","onSubmit","trim","this","className","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","img","alt","onClick","id","webformatURL","largeImageURL","src","data-url","data-id","ImageGallery","gallery","map","WrappLoader","children","Button","modalRoot","document","querySelector","Modal","handleKeyDown","closeModal","window","addEventListener","removeEventListener","url","createPortal","notyf","Notyf","App","page","error","isLoading","showModal","imgUrl","toggleModal","currentTarget","code","handleSubmit","prevState","handleClick","handleFetch","handleClickImg","dataset","stateGallery","length","message","position","x","y","dismissible","catch","finally","_prevProps","scrollTo","top","documentElement","scrollHeight","behavior","seeButton","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1d7a225e.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst MY_KEY = '20832523-2bf34066ca306390d6c2fd3bb';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst per_page = 12;\r\n\r\nconst fetchGalleryWithQuery = (searchQuery, numberPage = 1) => {\r\n  return axios\r\n    .get(\r\n      `${BASE_URL}?q=${searchQuery}&page=${numberPage}&key=${MY_KEY}&image_type=photo&orientation=horizontal&per_page=${per_page}`\r\n    )\r\n    .then((response) => response.data.hits);\r\n};\r\n\r\nconst galleryApi = {\r\n  fetchGalleryWithQuery,\r\n};\r\n\r\nexport default galleryApi;\r\n","import { Component } from 'react';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    value: '',\r\n  };\r\n\r\n  handleChange = ({ target }) => {\r\n    const { name, value } = target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handeleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { value } = this.state;\r\n    this.props.onSubmit(value.trim());\r\n  };\r\n\r\n  render() {\r\n    const { value } = this.state;\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handeleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            name=\"value\"\r\n            value={value}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ img, alt, onClick }) => {\r\n  const { id, webformatURL, largeImageURL } = img;\r\n\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={webformatURL}\r\n        data-url={largeImageURL}\r\n        data-id={id}\r\n        alt={alt}\r\n        className=\"ImageGalleryItem-image\"\r\n        onClick={onClick}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  img: PropTypes.shape({\r\n    id: PropTypes.number,\r\n    webformatURL: PropTypes.string,\r\n    largeImageURL: PropTypes.string,\r\n  }),\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import PropTypes from 'prop-types';\r\n\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\n\r\nconst ImageGallery = ({ gallery, alt, onClick }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {gallery.map((img) => (\r\n        <ImageGalleryItem key={img.id} img={img} alt={alt} onClick={onClick} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  gallery: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import PropTypes from 'prop-types';\r\nconst WrappLoader = ({ children }) => {\r\n  return <div className=\"WrappLoader\">{children}</div>;\r\n};\r\n\r\nWrappLoader.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\nexport default WrappLoader;\r\n","const Button = ({ onClick }) => {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    this.props.closeModal(e);\r\n  };\r\n\r\n  render() {\r\n    const { alt, url, closeModal } = this.props;\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={closeModal}>\r\n        <div className=\"Modal\">\r\n          <img src={url} alt={alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport galleryApi from './services/galleryApi';\r\n\r\nimport Searchbar from './components/Searchbar';\r\nimport ImageGallery from './components/ImageGallery';\r\nimport WrappLoader from './components/WrappLoader';\r\nimport Button from './components/Button';\r\nimport Modal from './components/Modal';\r\n\r\nimport { Notyf } from 'notyf';\r\nimport 'notyf/notyf.min.css';\r\n\r\nconst notyf = new Notyf();\r\n\r\nclass App extends Component {\r\n  state = {\r\n    gallery: [],\r\n    searchQuery: '',\r\n    page: 1,\r\n    error: '',\r\n    isLoading: false,\r\n    showModal: false,\r\n    imgUrl: '',\r\n  };\r\n\r\n  componentDidUpdate(_prevProps, prevState) {\r\n    if (prevState.searchQuery !== this.state.searchQuery) {\r\n      this.handleFetch();\r\n    }\r\n    if (prevState.gallery !== this.state.gallery && prevState.gallery.length !== 0) {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n    }\r\n  }\r\n\r\n  toggleModal = (e) => {\r\n    if (e.target === e.currentTarget || e.code === 'Escape') {\r\n      this.setState(({ showModal }) => ({ showModal: !showModal }));\r\n    }\r\n  };\r\n\r\n  handleSubmit = (value) => {\r\n    if (value === '') return;\r\n    this.setState((prevState) => {\r\n      if (prevState.searchQuery === value) return;\r\n\r\n      return { searchQuery: value, page: 1, error: '', gallery: [] };\r\n    });\r\n  };\r\n\r\n  handleClick = () => {\r\n    this.handleFetch();\r\n  };\r\n\r\n  handleClickImg = (e) => {\r\n    this.setState({ imgUrl: e.target.dataset.url });\r\n    this.toggleModal(e);\r\n  };\r\n\r\n  handleFetch = () => {\r\n    const { searchQuery, page, gallery: stateGallery } = this.state;\r\n    this.setState({ isLoading: true });\r\n    galleryApi\r\n      .fetchGalleryWithQuery(searchQuery, page)\r\n      .then((gallery) => {\r\n        if (gallery.length === 0) {\r\n          if (stateGallery.length === 0) {\r\n            notyf.error({\r\n              message: 'Nothing found',\r\n              position: {\r\n                x: 'center',\r\n                y: 'top',\r\n              },\r\n              dismissible: true,\r\n            });\r\n            return;\r\n          }\r\n\r\n          notyf.error({\r\n            message: 'End of image list',\r\n            position: {\r\n              x: 'center',\r\n              y: 'top',\r\n            },\r\n            dismissible: true,\r\n          });\r\n        }\r\n        if (gallery.length > 0) {\r\n          this.setState((prevState) => ({ gallery: [...prevState.gallery, ...gallery] }));\r\n        }\r\n      })\r\n      .catch((error) => this.setState({ error }))\r\n      .finally(() =>\r\n        this.setState((prevState) => {\r\n          return { isLoading: false, page: prevState.page + 1 };\r\n        })\r\n      );\r\n  };\r\n\r\n  render() {\r\n    const { gallery, isLoading, showModal, searchQuery, imgUrl } = this.state;\r\n    const seeButton = this.state.gallery.length > 0;\r\n    return (\r\n      <div className=\"App\">\r\n        {showModal && <Modal alt={searchQuery} url={imgUrl} closeModal={this.toggleModal} />}\r\n        <Searchbar onSubmit={this.handleSubmit} />\r\n        <ImageGallery gallery={gallery} alt={searchQuery} onClick={this.handleClickImg} />\r\n        <WrappLoader>\r\n          {isLoading ? (\r\n            <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={100} width={100} timeout={3000} />\r\n          ) : (\r\n            seeButton && <Button onClick={this.handleClick} />\r\n          )}\r\n        </WrappLoader>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}